name: Deploy Frontend to Production

on:
  push:
    branches: [ main ]
  workflow_dispatch:

jobs:
  deploy:
    name: Deploy React App to Windows Server
    uses: NoSoyRo/dev-ops/.github/workflows/windows-deploy.yml@main
    with:
      # Ruta donde est谩 clonado el proyecto en el servidor Windows
      project-path: 'C:\Projects\RedNegociosFrontEnd'
      
      # Versi贸n de Node.js (ajusta seg煤n tu package.json)
      node-version: '18'
      
      # Comandos para instalar dependencias y compilar
      build-command: |
        npm install
        npm run build
      
      # Opcional: Reiniciar servicio o servidor web despu茅s del deploy
      # Ajusta seg煤n tu configuraci贸n de IIS o servidor web
      post-deploy-command: |
        Write-Host " Aplicaci贸n frontend actualizada" -ForegroundColor Green
        # Descomenta seg煤n tu configuraci贸n:
        # Restart-WebAppPool -Name "RedNegociosFrontend"
        # iisreset /restart
      
      # Ambiente de deployment
      environment: 'production'
